Here is a mathematical blueprint of the Chebotarev Density Theorem based on Romyar Sharifi's lecture notes (specifically Chapter 7), structured to serve as a ground truth for Lean formalization.

### 1. Definitions and Setup

**Context:**
*   Let $K$ be a number field (a finite extension of $\mathbb{Q}$).
*   Let $L$ be a finite Galois extension of $K$ with Galois group $G = \text{Gal}(L/K)$.
*   Let $\mathcal{O}_K$ and $\mathcal{O}_L$ denote the rings of integers of $K$ and $L$, respectively.

**Dirichlet Density (Definition 7.1.13):**
Let $S$ be a set of prime ideals of $\mathcal{O}_K$. The Dirichlet density of $S$, denoted $\delta(S)$, is defined as:
$$ \delta(S) = \lim_{s \to 1^+} \frac{\sum_{\mathfrak{p} \in S} N(\mathfrak{p})^{-s}}{\sum_{\mathfrak{p} \subset \mathcal{O}_K} N(\mathfrak{p})^{-s}} $$
where $N(\mathfrak{p}) = [\mathcal{O}_K : \mathfrak{p}]$ is the absolute norm.
*Note: Sharifi notes that the denominator is asymptotic to $\log(1/(s-1))$ as $s \to 1^+$.*

**Frobenius Element (Definition 7.2.1):**
Let $\mathfrak{p}$ be a prime ideal of $\mathcal{O}_K$ unramified in $L$. Let $\mathfrak{P}$ be a prime ideal of $\mathcal{O}_L$ lying over $\mathfrak{p}$. There exists a unique element $\sigma \in G$, called the **Frobenius automorphism** of $\mathfrak{P}$ (denoted $\sigma_{\mathfrak{P}}$ or $(\frac{L/K}{\mathfrak{P}})$), satisfying:
$$ \sigma(\alpha) \equiv \alpha^{N(\mathfrak{p})} \pmod{\mathfrak{P}} \quad \forall \alpha \in \mathcal{O}_L. $$

**Conjugacy Class of Frobenius:**
For a fixed $\mathfrak{p}$, the set of Frobenius elements $\{ \sigma_{\mathfrak{P}} \mid \mathfrak{P} \text{ divides } \mathfrak{p} \}$ constitutes a conjugacy class $C$ in $G$. We denote this conjugacy class by $\text{Frob}_{\mathfrak{p}}$ (or $(\frac{L/K}{\mathfrak{p}})$).

---

### 2. Analytic Prerequisites (Axioms for Formalization)

The proof relies on analytic properties of L-functions. In a formalization context, these would likely be treated as axioms or imported from an analytic library.

**Artin L-functions (Definition 7.1.15):**
For a character $\chi$ of a representation of $G$, the Artin L-function is defined as an Euler product.

**Analytic Properties (Proposition 7.1.16 & 7.1.19):**
1.  **Continuation:** $L(s, \chi)$ extends to a meromorphic function on $\text{Re}(s) > 1$.
2.  **Non-vanishing:** If $\chi$ is a nontrivial irreducible character, then $L(1, \chi) \neq 0$.
3.  **Pole:** The Dedekind zeta function $\zeta_L(s)$ (corresponding to the trivial character) has a simple pole at $s=1$.

**Orthogonality Relation for Density (Derived from 7.1.19):**
For an abelian Galois group $G$ and a specific element $\sigma \in G$, the density of primes $\mathfrak{p}$ with $\text{Frob}_{\mathfrak{p}} = \sigma$ is given by:
$$ \delta(\{ \mathfrak{p} \mid \text{Frob}_{\mathfrak{p}} = \sigma \}) = \frac{1}{|G|} \sum_{\chi \in \widehat{G}} \overline{\chi}(\sigma) \lim_{s \to 1^+} \frac{\log L(s, \chi)}{\log \zeta_K(s)} $$
Using the non-vanishing of $L(1, \chi)$ for $\chi \neq 1$, this sum collapses to $1/|G|$.

---

### 3. The Chebotarev Density Theorem

**Theorem 7.2.2 (Chebotarev):**
Let $L/K$ be a finite Galois extension of number fields with Galois group $G$. Let $C \subset G$ be a conjugacy class. Let $S_C$ be the set of prime ideals $\mathfrak{p}$ of $K$ unramified in $L$ such that $\text{Frob}_{\mathfrak{p}} = C$. Then the Dirichlet density of $S_C$ exists and is:
$$ \delta(S_C) = \frac{|C|}{|G|}. $$

---

### 4. Mathematical Blueprint of the Proof

Sharifi's proof does not assume the full Artin Reciprocity Law immediately; rather, it builds up from the Cyclotomic case.

#### Step 1: The Cyclotomic Case (Proposition 7.2.1)
**Statement:** Let $K$ be a number field, $m \ge 1$, and $G = \text{Gal}(K(\mu_m)/K)$. For any $\sigma \in G$, the density of primes $\mathfrak{p}$ with $\text{Frob}_{\mathfrak{p}} = \sigma$ is $1/|G|$.
**Proof Logic:**
1.  Identify the extension $K(\mu_m)/K$ as abelian.
2.  For an unramified prime $\mathfrak{p}$ (not dividing $m$), the Frobenius $\sigma_{\mathfrak{p}}$ acts on roots of unity $\zeta_m$ by $\sigma_{\mathfrak{p}}(\zeta_m) = \zeta_m^{N(\mathfrak{p})}$.
3.  The condition $\text{Frob}_{\mathfrak{p}} = \sigma$ corresponds to a condition on $N(\mathfrak{p}) \pmod m$.
4.  Apply the orthogonality relations of L-functions (Proposition 7.1.19) to show the density is $1/|G|$.

#### Step 2: Reduction to the Cyclic Case (Theorem 7.2.2, Step 1)
**Goal:** Prove the theorem for general $G$ assuming it holds for cyclic extensions.
**Proof Logic:**
1.  Let $\sigma \in C$. Let $Z(\sigma) \subseteq G$ be the centralizer of $\sigma$.
2.  Let $E = L^{\langle \sigma \rangle}$ be the fixed field of the cyclic subgroup generated by $\sigma$. Then $L/E$ is a cyclic extension.
3.  Consider the set $T_\sigma$ of primes $\mathfrak{P}$ in $E$ such that:
    *   $\mathfrak{P}$ is unramified in $L$.
    *   $\mathfrak{P}$ has degree 1 over $K$ (i.e., $N_{E/K}(\mathfrak{P})$ is prime).
    *   The Frobenius of $\mathfrak{P}$ in $\text{Gal}(L/E)$ is $\sigma$.
4.  **Bijection argument:**
    *   If $\mathfrak{p} \in S_C$ (in $K$), it splits in $E$ into primes $\mathfrak{P}$.
    *   Count how many such $\mathfrak{P}$ lie above $\mathfrak{p}$ and have Frobenius $\sigma$.
    *   Combinatorics of decomposition groups shows that the density relation holds:
        $$ \delta(S_C) = \frac{|C|}{|G|} \iff \delta(T_\sigma) = \frac{1}{[L:E]} $$
5.  Thus, proving the theorem for the cyclic extension $L/E$ and element $\sigma$ suffices.

#### Step 3: Solving the Cyclic Case via Intersections (Theorem 7.2.2, Step 2)
**Goal:** Prove Chebotarev for a cyclic extension $L/K$.
**Proof Logic:**
1.  Let $L/K$ be abelian (specifically cyclic).
2.  **Auxiliary Cyclotomic Field:** Choose an integer $m$ such that $K(\mu_m)$ is disjoint enough from $L$ to use density arguments (specifically, ensuring intersection properties of Galois groups).
3.  Consider the compositum $M = L(\mu_m)$.
    $$ \text{Gal}(M/K) \hookrightarrow \text{Gal}(L/K) \times \text{Gal}(K(\mu_m)/K) $$
4.  Use the known density of primes in the cyclotomic extension $K(\mu_m)/K$ (Step 1).
5.  Use a counting argument on the intersection of the Frobenius conditions in the composite field $M$.
6.  Show that the density of primes with $\text{Frob}_{\mathfrak{p}}|_L = \sigma$ is exactly $1/[L:K]$.

### 5. Key Algebraic Lemmas for Formalization

To formalize this, one needs the following specific algebraic lemmas emphasized in the notes:

*   **Lemma (Frobenius on Cyclotomics):** If $\mathfrak{p} \nmid m$, and $\sigma = \text{Frob}_{\mathfrak{p}}$ in $\text{Gal}(K(\mu_m)/K)$, then $\sigma(\zeta) = \zeta^{N(\mathfrak{p})}$ for all $\zeta \in \mu_m$.
*   **Lemma (Conjugacy counting):** $|C| = [G : Z(\sigma)]$.
*   **Lemma (Abelian L-function limits):** $\sum_{\chi} \overline{\chi}(\sigma) \log L(s, \chi) \sim |G| \sum_{\mathfrak{p}, \text{Frob}=\sigma} N(\mathfrak{p})^{-s}$.
